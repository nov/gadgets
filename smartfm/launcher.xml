<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="smart.fm" 
               description="smart.fm launcher gadget"
               author_email="nov@matake.jp"
               thumbnail="http://matake.jp/gadgets/smartfm/images/thumbnail.png"
               screenshot="http://matake.jp/gadgets/smartfm/images/screenshot.png"
               singleton="true">
    <Require feature="tabs" />
    <Require feature="opensocial-0.8" />
    <Require feature="dynamic-height" />
    <Optional feature="content-rewrite">
      <Param name="include-tags"></Param>
    </Optional>
    <Icon>http://smart.fm/favicon.ico</Icon>
  </ModulePrefs>
  <UserPref name="username" display_name="Your smart.fm username" datatype="string" required="true" />
  <UserPref name="per_page" display_name="The number of lists" datatype="enum" default_value="5" required="true">
    <EnumValue value="3" />
    <EnumValue value="5" />
    <EnumValue value="10" />
    <EnumValue value="15" />
    <EnumValue value="20" />
  </UserPref>
  <Content type="html" view="canvas, home, profile">
    <![CDATA[
      <link type="text/css" rel="stylesheet" href="http://matake.jp/gadgets/smartfm/stylesheets/launcher.css" />
      <script type="text/javascript" src="http://matake.jp/gadgets/smartfm/javascripts/opensocial-jquery.min.js"></script>
      <script type="text/javascript" src="http://matake.jp/gadgets/smartfm/javascripts/start_swf.js"></script>
      <script type="text/javascript" src="http://matake.jp/gadgets/smartfm/javascripts/smart.js"></script>
      <script type="text/javascript" src="http://matake.jp/gadgets/smartfm/javascripts/smart.lists.js"></script>
      <script type="text/javascript" src="http://matake.jp/gadgets/smartfm/javascripts/smart.study_results.js"></script>
      <script type="text/javascript">
        jQuery(function ($) {
          smart.init(function () {
            smart.lists.load();
            smart.study_results.load();
          });
        });
      </script>
      <div id="content">
        <div id="pref" style="display:none">
          <form action="#" onsubmit="smart.setpref(this); return false;">
            <label for="username">smart.fm ユーザ名</label>
            <input type="text" name="username" id="username" />
            <input type="submit" value="設定" />
          </form>
        </div>
        <div id="lists"></div>
        <div id="scores"></div>
        <div class="powered_by">
          <a href="http://smart.fm" target="_blank">
            <img width="210" height="36" alt="powered by smart.fm API" src="http://developer.smart.fm/files/powered_by_smartfm_210x36_white.gif" />
          </a>
        </div>
      </div>
    ]]>
  </Content>
</Module>
